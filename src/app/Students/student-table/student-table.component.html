<div *ngIf="isLoggedIn">
  <app-navbar></app-navbar>
  <div class="container mt-5">
    <ng-template #content let-modal>
      <div class="modal-header">
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="modal.dismiss('Cross click')"
        ></button>
      </div>
      <div class="modal-body">
        <!-- <app-add-student (studentAdded)="UpdateTable($event)"></app-add-student> -->
      </div>
    </ng-template>

    <div class="search-container my-4 p-3 rounded shadow-sm bg-light">
      <!-- <form (ngSubmit)="searchStudents()">
        <div class="row">
          <div class="col-md-6">
            <label for="name">Name</label>
            <input
              id="name"
              type="text"
              class="form-control mb-3"
              [(ngModel)]="searchDto.name"
              name="name"
              placeholder="Search Name"
            />
          </div>
          <div class="col-md-3">
            <label for="ageFrom">Age From</label>
            <input
              id="ageFrom"
              type="number"
              class="form-control mb-3"
              [(ngModel)]="searchDto.ageFrom"
              name="ageFrom"
              placeholder="Age From"
            />
          </div>
          <div class="col-md-3">
            <label for="ageTo">Age To</label>
            <input
              id="ageTo"
              type="number"
              class="form-control mb-3"
              [(ngModel)]="searchDto.ageTo"
              name="ageTo"
              placeholder="Age To"
            />
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <label for="country">Country</label>
            <input
              id="country"
              type="text"
              class="form-control mb-3"
              [(ngModel)]="searchDto.country"
              name="country"
              placeholder="Country"
            />
          </div>
          <div class="col-md-6">
            <label for="gender">Gender</label>
            <select
              id="gender"
              [(ngModel)]="searchDto.gender"
              class="form-control mb-3"
              name="gender"
            >
              <option value="Male">Male</option>
              <option value="Female">Female</option>
            </select>
          </div>
        </div>
        <div class="d-flex justify-content-end">
          <button class="btn btn-primary me-2" type="submit">Search</button>
          <button class="btn btn-warning" type="button" (click)="reset()">
            Reset
          </button>
        </div>
      </form> -->
    </div>

    <!-- <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>Student List</h2>
      <div *ngIf="isAdmin == 'false'">
        <button class="btn btn-success" (click)="openXl(content, null)">
          Add Student
        </button>
      </div>
    </div> -->

    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th (click)="toggleSort('name')">
              Student Name
              <i class="material-icons sort-icon" [ngClass]="{'active': sortBy === 'name', 'asc': !isDescending, 'desc': isDescending}">
                
              </i>
            </th>
            <th (click)="toggleSort('age')">
              Age
              <i class="material-icons sort-icon" [ngClass]="{'active': sortBy === 'age', 'asc': !isDescending, 'desc': isDescending}">
                
              </i>
            </th>
            <th (click)="toggleSort('gender')">
              Gender
              <i class="material-icons sort-icon" [ngClass]="{'active': sortBy === 'gender', 'asc': !isDescending, 'desc': isDescending}">
                
              </i>
              
            </th>
            <th (click)="toggleSort('email')">
              Email
              <i class="material-icons sort-icon" [ngClass]="{'active': sortBy === 'email', 'asc': !isDescending, 'desc': isDescending}">
                
              </i>
            </th>
            <th (click)="toggleSort('country')">
              Country
              <i class="material-icons sort-icon" [ngClass]="{'active': sortBy === 'country', 'asc': !isDescending, 'desc': isDescending}">
                
              </i>
            </th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="students.length === 0">
            <td colspan="7" class="text-danger text-center">
              No students found.
            </td>
          </tr>
          <tr *ngFor="let student of students">
            <td>{{ student.firstName }} {{ student.lastName }}</td>
            <td>{{ student.birthDate | age }}</td>
            <td>{{ student.gender === 0 ? 'Male' : 'Female' }}</td>
            <td>{{ student.email }}</td>
            <td>{{ student.country }}</td>
            <td>
              <!-- Action buttons here -->
              <i class="material-icons text-info" (click)="show(student.id)"
              >visibility</i
            >
            <i
              class="material-icons text-danger"
              (click)="delete(student.id)"
              >delete</i
            >
            <!-- <i
              class="material-icons text-warning"
              (click)="openEditModal(student)"
              >edit</i
            > -->
            </td>
          </tr>
        </tbody>
      </table>
      
    </div>

    <div class="d-flex justify-content-between align-items-center mt-4">
      <ngb-pagination
        [collectionSize]="totalItems"
        [(page)]="pageIndex"
        [pageSize]="pageSize"
        (pageChange)="onPageChange($event)"
      ></ngb-pagination>
      <div class="pagination-controls">
        <button class="btn btn-outline-info" (click)="goToFirstPage()">First Page</button>
        <button class="btn btn-outline-warning" (click)="goToLastPage()">Last Page</button>
      </div>
      <div class="d-flex align-items-center">
        <label for="pageSize" class="me-2">Entries per page:</label>
        <select
          id="pageSize"
          class="form-control w-auto"
          [(ngModel)]="pageSize"
          (change)="onPageSizeChange()"
        >
          <option *ngFor="let size of [10, 20, 30, 40]" [value]="size">{{ size }}</option>
        </select>
      </div>
      <div>Total Items: {{ totalItems }}</div>
      <div>{{ getCurrentRange() }}</div>
    </div>
    
